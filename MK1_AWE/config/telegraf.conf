# Telegraf Configuration for Gen3 AWE Test Rig
# 
# NOTE: All hardware bridges now write DIRECTLY to InfluxDB
# Telegraf is only used for system monitoring (CPU, memory, disk)
#
# Hardware bridges with direct InfluxDB writes:
#   - NI cDAQ-9187 Analog Inputs (100Hz) - port 8881
#   - Pico TC-08 Thermocouples (1Hz)     - port 8882
#   - PSU Modbus RTU (8Hz)               - port 8883
#   - BGA01 (2Hz)                        - port 8888
#   - BGA02 (2Hz)                        - port 8889
#   - BGA03 (2Hz)                        - port 8890

[agent]
  interval = "10s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "10s"
  flush_jitter = "0s"
  precision = ""
  hostname = "Gen3_AWE"
  omit_hostname = false

# ═══════════════════════════════════════════════════════════════
# OUTPUT
# ═══════════════════════════════════════════════════════════════

[[outputs.influxdb_v2]]
  urls = ["http://influxdb:8086"]
  token = "$INFLUXDB_ADMIN_TOKEN"
  organization = "electrolyzer"
  bucket = "electrolyzer_data"
  timeout = "5s"

# ═══════════════════════════════════════════════════════════════
# HARDWARE INPUTS - ALL DISABLED
# Bridges now write directly to InfluxDB for better performance
# ═══════════════════════════════════════════════════════════════

# NI cDAQ-9187 Analog Inputs - Direct InfluxDB (100Hz)
# [[inputs.http]]
#   urls = ["http://host.docker.internal:8881/metrics"]

# Pico TC-08 Thermocouples - Direct InfluxDB (1Hz)
# [[inputs.http]]
#   urls = ["http://host.docker.internal:8882/metrics"]

# PSU Monitoring - Direct InfluxDB (8Hz)
# [[inputs.http]]
#   urls = ["http://host.docker.internal:8883/metrics"]

# BGA01 - Direct InfluxDB (2Hz)
# [[inputs.http]]
#   urls = ["http://host.docker.internal:8888/metrics"]

# BGA02 - Direct InfluxDB (2Hz)
# [[inputs.http]]
#   urls = ["http://host.docker.internal:8889/metrics"]

# BGA03 - Direct InfluxDB (2Hz)
# [[inputs.http]]
#   urls = ["http://host.docker.internal:8890/metrics"]

# ═══════════════════════════════════════════════════════════════
# SYSTEM MONITORING
# ═══════════════════════════════════════════════════════════════

[[inputs.cpu]]
  percpu = false
  totalcpu = true
  collect_cpu_time = false
  report_active = false

[[inputs.mem]]

[[inputs.disk]]
  ignore_fs = ["tmpfs", "devtmpfs", "devfs", "iso9660", "overlay", "aufs", "squashfs"]
